= android
:toc: macro
:setanchors:


toc::[]

== intent

=== declaration dans manifest

Chaque activité déclarée peut avoir un intent associée pour qu'elle soit appelable (exportée) -> cf exemple (<<active_declare,declaration activité>>

=== startActivity(intent)

C'est l'intent qui contient l'information sur l'activité à démarrer. Elle peut être *explicit* ou *implicit*

=== explicit intent


* Invocation

[literal]
Intent(Context packageContext, Class<?> cls)


[source,java]
.Example (this est l'activity)
----
Intent intent = new Intent(this, SignInActivity.class);
startActivity(intent);
----

=== Implicit intent


* Invocation

[source,java]
----
// Create the text message with a string
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, textMessage);
sendIntent.setType("text/plain");

// Verify that the intent will resolve to an activity
if (sendIntent.resolveActivity(getPackageManager()) != null) {
    startActivity(sendIntent);
}
----

* declaration dans manifest

Se fait dans le *manifest* , permet d'exporter l'intent pour qu'il soir appelable. On définit le profil de la méthode (attend un texte par exemple)

[source,xml]
.Intent in manifest
----
<activity android:name="ShareActivity">
    <intent-filter>
        <action android:name="android.intent.action.SEND"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <data android:mimeType="text/plain"/>
    </intent-filter>
</activity>
----

=== Réception des données

.Recieve in onCreate
----
Intent intent = getIntent();
String message = intent.getStringExtra(MyActivity.EXTRA_MESSAGE);
----

== activity

=== declaration

Chaque activity doit être déclarée dnas un element <activity>. Il faut "exporter" (intent-filter) l'actibité principale pour qu'elle soit launchable.

[[active_declare]]
[source,xml]
----
<activity android:name="MainActivity">
    <!-- This activity is the main entry, should appear in app launcher -->
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
----

=== cycle de vie

==== différentes etat/boucles

image::http://developer.android.com/images/activity_lifecycle.png[link="http://developer.android.com/images/activity_lifecycle.png"]

====  onSaveInstanceState/onRestoreInstanceData

image::http://developer.android.com/images/fundamentals/restore_instance.png[link="http://developer.android.com/images/fundamentals/restore_instance.png"]
